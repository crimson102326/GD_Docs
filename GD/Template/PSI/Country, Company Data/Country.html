<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Country Data Table -- Sort, Search, Filter</title>
  <style>
    :root{
      --bg-1:#0b1021;
      --bg-2:#0f172a;
      --bg-3:#0a0f1f;
      --panel:rgba(17,24,39,0.7);
      --panel-strong:#0f1a33;
      --text:#e6eaf2;
      --muted:#9aa4b2;
      --accent:#60a5fa;
      --accent-2:#8b5cf6;
      --row-alt:rgba(15,23,42,0.65);
      --row-hover:#172133;
      --border:#1f2a3d;
      --chip:#111a2c;
      --chip-border:#22324a;
      --ok:#10b981;
      --warn:#f59e0b;
      --bad:#ef4444;
      --shadow:0 10px 30px rgba(0,0,0,0.45);
      --radius:12px;
    }

    html,body{
      height:100%;
      margin:0;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, #0a1a3a55, transparent 60%),
        radial-gradient(900px 500px at 100% 0%, #1a0f3a44, transparent 50%),
        linear-gradient(180deg, var(--bg-2), var(--bg-1) 55%, var(--bg-3));
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .page{
      max-width:1200px;
      margin:24px auto 80px;
      padding:0 16px;
    }

    .header{
      display:flex;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }

    .title{
      display:flex;
      align-items:center;
      gap:10px;
      font-size:20px;
      font-weight:700;
      letter-spacing:.2px;
    }

    .badge{
      font-size:12px;
      padding:4px 8px;
      border:1px solid var(--chip-border);
      background:linear-gradient(180deg, #0e1a30, #0b1426);
      border-radius:999px;
      color:var(--muted);
    }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      width:100%;
    }

    .search{
      position:relative;
      flex:1 1 300px;
      min-width:220px;
    }
    .search input{
      width:100%;
      padding:12px 40px 12px 38px;
      background:rgba(17,24,39,0.65);
      border:1px solid var(--border);
      border-radius:10px;
      color:var(--text);
      font-size:14px;
      outline:none;
      transition:border-color .15s ease, box-shadow .15s ease;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
    }
    .search input:focus{
      border-color: #27487b;
      box-shadow: 0 0 0 3px rgba(96,165,250,0.15);
    }
    .search .icon{
      position:absolute;
      left:10px;
      top:50%;
      transform:translateY(-50%);
      font-size:14px;
      color:var(--muted);
      pointer-events:none;
    }
    .search .clear-btn{
      position:absolute;
      right:6px;
      top:50%;
      transform:translateY(-50%);
      width:28px;
      height:28px;
      border:none;
      background:transparent;
      color:var(--muted);
      border-radius:8px;
      cursor:pointer;
      display:none;
    }
    .search .clear-btn:hover{ color:var(--text); }

    .filter{
      display:flex;
      align-items:center;
      gap:8px;
    }
    .select{
      position:relative;
    }
    .select select{
      appearance:none;
      -webkit-appearance:none;
      -moz-appearance:none;
      padding:12px 34px 12px 12px;
      font-size:14px;
      background:rgba(17,24,39,0.65);
      border:1px solid var(--border);
      color:var(--text);
      border-radius:10px;
      outline:none;
      cursor:pointer;
    }
    .select:after{
      content:"‚ñæ";
      position:absolute;
      right:10px; top:50%; transform:translateY(-50%);
      color:var(--muted);
      pointer-events:none;
      font-size:12px;
    }

    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:11px 12px;
      font-size:14px;
      color:var(--text);
      background:linear-gradient(180deg, #0e1a30, #0b1426);
      border:1px solid var(--chip-border);
      border-radius:10px;
      cursor:pointer;
      transition:transform .05s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover{
      background:linear-gradient(180deg, #10203e, #0c162c);
      border-color:#2a4167;
    }
    .btn:active{ transform: translateY(1px); }

    .table-container{
      background:rgba(14,22,40,0.45);
      border:1px solid var(--border);
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow: var(--shadow);
    }

    .table-toolbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:10px 12px;
      background:linear-gradient(180deg, rgba(14,22,40,0.7), rgba(9,14,26,0.6));
      border-bottom:1px solid var(--border);
      gap:8px;
      font-size:12px;
      color:var(--muted);
    }

    .table-scroll{
      overflow:auto;
      -webkit-overflow-scrolling:touch;
      max-height:75vh;
    }

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      min-width:1400px;
    }

    thead th{
      position:sticky;
      top:0;
      background:rgba(17,24,39,0.9);
      backdrop-filter: blur(6px);
      z-index:2;
      text-align:left;
      font-weight:700;
      font-size:13px;
      color:var(--muted);
      padding:12px;
      border-bottom:1px solid var(--border);
      white-space:nowrap;
      user-select:none;
      cursor:pointer;
    }
    thead th:hover{ color:var(--text); }
    thead th .label{ display:inline-flex; align-items:center; gap:6px; }
    thead th[data-sort="asc"] .label::after{
      content:"‚ñ≤"; font-size:11px; color:var(--accent);
    }
    thead th[data-sort="desc"] .label::after{
      content:"‚ñº"; font-size:11px; color:var(--accent);
    }

    tbody td{
      padding:12px;
      border-bottom:1px solid var(--border);
      font-size:14px;
      vertical-align:middle;
    }
    tbody tr:nth-child(even) td{ background:var(--row-alt); }
    tbody tr:hover td{ background:var(--row-hover); }

    .muted{ color:var(--muted); }
    .mono{ font-variant-numeric: tabular-nums; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }

    .note{
      padding:10px 12px;
      color:var(--muted);
      font-size:12px;
      background:linear-gradient(180deg, rgba(14,22,40,0.6), rgba(9,14,26,0.5));
      border-top:1px solid var(--border);
    }

    .empty{
      display:none;
      padding:18px;
      text-align:center;
      color:var(--muted);
    }

    .hl{
      background: linear-gradient(90deg, rgba(96,165,250,0.18), rgba(139,92,246,0.18));
      padding:1px 2px;
      border-radius:4px;
    }

    @media (max-width: 640px){
      .title{ font-size:18px; }
      .controls{ max-width:100%; }
      thead th, tbody td{ padding:10px; font-size:13px; }
      table{ min-width:1400px; }
      .btn{ padding:10px 11px; font-size:13px; }
      .badge{ font-size:11px; }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="header">
      <div class="title">
        Country Data
        <span class="badge" title="Snapshot window for population and indicative metrics">Data snapshot: 2024</span>
      </div>
      <div class="controls">
        <div class="search" style="flex:1 1 auto;max-width:520px;">
          <span class="icon">üîé</span>
          <input id="searchInput" type="search" placeholder="Search by country, continent, numbers, timezones, or cities‚Ä¶" aria-label="Search table" />
          <button class="clear-btn" id="clearSearch" aria-label="Clear search">‚úï</button>
        </div>
        <div class="filter">
          <div class="select">
            <select id="continentFilter" aria-label="Filter by continent">
              <option value="">All continents</option>
              <option>Europe</option>
              <option>Asia</option>
              <option>Americas</option>
              <option>Africa</option>
              <option>Oceania</option>
            </select>
          </div>
          <button class="btn" id="resetBtn" title="Clear filters and sorting">Reset</button>
        </div>
      </div>
    </div>

    <div class="table-container">
      <div class="table-toolbar">
        <div id="rowCount" aria-live="polite">Loading‚Ä¶</div>
        <div>Click a column to sort; click again to reverse.</div>
      </div>
      <div class="table-scroll">
        <table id="dataTable" aria-describedby="tableDescription">
          <thead>
            <tr>
              <th data-col="0" aria-sort="none"><span class="label">Country</span></th>
              <th data-col="1" aria-sort="none"><span class="label">Continent</span></th>
              <th data-col="2" aria-sort="none"><span class="label">Population (M)</span></th>
              <th data-col="3" aria-sort="none"><span class="label">Avg Net Monthly Income (USD)</span></th>
              <th data-col="4" aria-sort="none"><span class="label">Crypto Usage (% Adults)</span></th>
              <th data-col="5" aria-sort="none"><span class="label">Net Crypto Reserves (USD)</span></th>
              <th data-col="6" aria-sort="none"><span class="label">Timezone (GMT/UTC)</span></th>
              <th data-col="7" aria-sort="none"><span class="label">Crypto Hubs (Cities/Regions)</span></th>
              <th data-col="8" aria-sort="none"><span class="label">Holdings per Crypto User (USD)</span></th>
            </tr>
          </thead>
          <tbody>
            <!-- Europe -->
            <tr><td>Albania</td><td>Europe</td><td>2.79</td><td>550</td><td>6</td></tr>
            <tr><td>Andorra</td><td>Europe</td><td>0.08</td><td>3200</td><td>8</td></tr>
            <tr><td>Austria</td><td>Europe</td><td>9.15</td><td>3100</td><td>12</td></tr>
            <tr><td>Belgium</td><td>Europe</td><td>11.72</td><td>3200</td><td>10</td></tr>
            <tr><td>Belarus</td><td>Europe</td><td>9.3</td><td>650</td><td>4</td></tr>
            <tr><td>Bosnia &amp; Herzegovina</td><td>Europe</td><td>3.21</td><td>620</td><td>5</td></tr>
            <tr><td>Bulgaria</td><td>Europe</td><td>6.38</td><td>870</td><td>7</td></tr>
            <tr><td>Croatia</td><td>Europe</td><td>3.84</td><td>1250</td><td>9</td></tr>
            <tr><td>Cyprus</td><td>Europe</td><td>1.26</td><td>2000</td><td>11</td></tr>
            <tr><td>Czechia</td><td>Europe</td><td>10.7</td><td>1900</td><td>13</td></tr>
            <tr><td>Denmark</td><td>Europe</td><td>5.98</td><td>3900</td><td>12</td></tr>
            <tr><td>Estonia</td><td>Europe</td><td>1.36</td><td>1800</td><td>16</td></tr>
            <tr><td>Finland</td><td>Europe</td><td>5.57</td><td>3200</td><td>9</td></tr>
            <tr><td>France</td><td>Europe</td><td>68.0</td><td>2900</td><td>8</td></tr>
            <tr><td>Germany</td><td>Europe</td><td>83.3</td><td>3000</td><td>9</td></tr>
            <tr><td>Greece</td><td>Europe</td><td>10.14</td><td>1500</td><td>11</td></tr>
            <tr><td>Hungary</td><td>Europe</td><td>9.54</td><td>1300</td><td>10</td></tr>
            <tr><td>Iceland</td><td>Europe</td><td>0.39</td><td>4000</td><td>10</td></tr>
            <tr><td>Ireland</td><td>Europe</td><td>5.29</td><td>3800</td><td>12</td></tr>
            <tr><td>Italy</td><td>Europe</td><td>58.94</td><td>2000</td><td>8</td></tr>
            <tr><td>Latvia</td><td>Europe</td><td>1.83</td><td>1500</td><td>15</td></tr>
            <tr><td>Liechtenstein</td><td>Europe</td><td>0.04</td><td>5000</td><td>12</td></tr>
            <tr><td>Lithuania</td><td>Europe</td><td>2.72</td><td>1700</td><td>14</td></tr>
            <tr><td>Luxembourg</td><td>Europe</td><td>0.66</td><td>4900</td><td>12</td></tr>
            <tr><td>Malta</td><td>Europe</td><td>0.54</td><td>2200</td><td>11</td></tr>
            <tr><td>Moldova</td><td>Europe</td><td>2.51</td><td>450</td><td>6</td></tr>
            <tr><td>Monaco</td><td>Europe</td><td>0.04</td><td>6500</td><td>8</td></tr>
            <tr><td>Montenegro</td><td>Europe</td><td>0.62</td><td>850</td><td>6</td></tr>
            <tr><td>Netherlands</td><td>Europe</td><td>17.9</td><td>3400</td><td>11</td></tr>
            <tr><td>North Macedonia</td><td>Europe</td><td>1.83</td><td>650</td><td>6</td></tr>
            <tr><td>Norway</td><td>Europe</td><td>5.53</td><td>4200</td><td>11</td></tr>
            <tr><td>Poland</td><td>Europe</td><td>37.65</td><td>1500</td><td>15</td></tr>
            <tr><td>Portugal</td><td>Europe</td><td>10.25</td><td>1500</td><td>9</td></tr>
            <tr><td>Romania</td><td>Europe</td><td>19.05</td><td>1000</td><td>8</td></tr>
            <tr><td>Russia</td><td>Europe</td><td>146</td><td>800</td><td>6</td></tr>
            <tr><td>San Marino</td><td>Europe</td><td>0.03</td><td>3500</td><td>8</td></tr>
            <tr><td>Serbia</td><td>Europe</td><td>6.62</td><td>800</td><td>7</td></tr>
            <tr><td>Slovakia</td><td>Europe</td><td>5.39</td><td>1600</td><td>12</td></tr>
            <tr><td>Slovenia</td><td>Europe</td><td>2.11</td><td>2100</td><td>10</td></tr>
            <tr><td>Spain</td><td>Europe</td><td>48.6</td><td>2100</td><td>9</td></tr>
            <tr><td>Sweden</td><td>Europe</td><td>10.62</td><td>3200</td><td>11</td></tr>
            <tr><td>Switzerland</td><td>Europe</td><td>8.98</td><td>5100</td><td>13</td></tr>
            <tr><td>T√ºrkiye</td><td>Europe</td><td>85.3</td><td>750</td><td>10</td></tr>
            <tr><td>Ukraine</td><td>Europe</td><td>36.74</td><td>420</td><td>5</td></tr>
            <tr><td>United Kingdom</td><td>Europe</td><td>67.8</td><td>2900</td><td>11</td></tr>
            <tr><td>Vatican City</td><td>Europe</td><td>0.0008</td><td>0</td><td>0</td></tr>

            <!-- Asia -->
            <tr><td>Afghanistan</td><td>Asia</td><td>42.24</td><td>60</td><td>1</td></tr>
            <tr><td>Armenia</td><td>Asia</td><td>2.79</td><td>470</td><td>5</td></tr>
            <tr><td>Azerbaijan</td><td>Asia</td><td>10.19</td><td>430</td><td>4</td></tr>
            <tr><td>Bahrain</td><td>Asia</td><td>1.54</td><td>2000</td><td>12</td></tr>
            <tr><td>Bangladesh</td><td>Asia</td><td>173</td><td>150</td><td>3</td></tr>
            <tr><td>Bhutan</td><td>Asia</td><td>0.79</td><td>380</td><td>2</td></tr>
            <tr><td>Brunei</td><td>Asia</td><td>0.46</td><td>2800</td><td>8</td></tr>
            <tr><td>Cambodia</td><td>Asia</td><td>16.94</td><td>250</td><td>4</td></tr>
            <tr><td>China</td><td>Asia</td><td>1409</td><td>1000</td><td>4</td></tr>
            <tr><td>Georgia</td><td>Asia</td><td>3.71</td><td>500</td><td>6</td></tr>
            <tr><td>India</td><td>Asia</td><td>1429</td><td>250</td><td>7</td></tr>
            <tr><td>Indonesia</td><td>Asia</td><td>282</td><td>300</td><td>8</td></tr>
            <tr><td>Iran</td><td>Asia</td><td>89</td><td>400</td><td>5</td></tr>
            <tr><td>Iraq</td><td>Asia</td><td>46.5</td><td>350</td><td>4</td></tr>
            <tr><td>Israel</td><td>Asia</td><td>9.8</td><td>3200</td><td>12</td></tr>
            <tr><td>Japan</td><td>Asia</td><td>123.9</td><td>2800</td><td>6</td></tr>
            <tr><td>Jordan</td><td>Asia</td><td>11.7</td><td>550</td><td>5</td></tr>
            <tr><td>Kazakhstan</td><td>Asia</td><td>19.9</td><td>700</td><td>6</td></tr>
            <tr><td>Kuwait</td><td>Asia</td><td>4.7</td><td>2800</td><td>11</td></tr>
            <tr><td>Kyrgyzstan</td><td>Asia</td><td>7.1</td><td>200</td><td>4</td></tr>
            <tr><td>Laos</td><td>Asia</td><td>7.5</td><td>180</td><td>3</td></tr>
            <tr><td>Lebanon</td><td>Asia</td><td>5.3</td><td>350</td><td>4</td></tr>
            <tr><td>Malaysia</td><td>Asia</td><td>34</td><td>1200</td><td>9</td></tr>
            <tr><td>Maldives</td><td>Asia</td><td>0.54</td><td>1000</td><td>6</td></tr>
            <tr><td>Mongolia</td><td>Asia</td><td>3.5</td><td>420</td><td>5</td></tr>
            <tr><td>Myanmar</td><td>Asia</td><td>54.8</td><td>150</td><td>3</td></tr>
            <tr><td>Nepal</td><td>Asia</td><td>30.9</td><td>140</td><td>2</td></tr>
            <tr><td>Oman</td><td>Asia</td><td>4.6</td><td>2000</td><td>10</td></tr>
            <tr><td>Pakistan</td><td>Asia</td><td>249</td><td>150</td><td>3</td></tr>
            <tr><td>Palestine</td><td>Asia</td><td>5.4</td><td>300</td><td>3</td></tr>
            <tr><td>Philippines</td><td>Asia</td><td>118</td><td>350</td><td>15</td></tr>
            <tr><td>Qatar</td><td>Asia</td><td>2.8</td><td>3000</td><td>13</td></tr>
            <tr><td>Saudi Arabia</td><td>Asia</td><td>36.5</td><td>2000</td><td>11</td></tr>
            <tr><td>Singapore</td><td>Asia</td><td>6</td><td>4200</td><td>11</td></tr>
            <tr><td>Sri Lanka</td><td>Asia</td><td>21.8</td><td>350</td><td>4</td></tr>
            <tr><td>Syria</td><td>Asia</td><td>23.5</td><td>40</td><td>1</td></tr>
            <tr><td>Taiwan</td><td>Asia</td><td>23.5</td><td>2200</td><td>10</td></tr>
            <tr><td>Tajikistan</td><td>Asia</td><td>10.2</td><td>120</td><td>2</td></tr>
            <tr><td>Thailand</td><td>Asia</td><td>71.8</td><td>550</td><td>11</td></tr>
            <tr><td>Timor-Leste</td><td>Asia</td><td>1.4</td><td>220</td><td>2</td></tr>
            <tr><td>Turkmenistan</td><td>Asia</td><td>6.5</td><td>300</td><td>2</td></tr>
            <tr><td>United Arab Emirates</td><td>Asia</td><td>9.5</td><td>3500</td><td>12</td></tr>
            <tr><td>Uzbekistan</td><td>Asia</td><td>36.5</td><td>200</td><td>3</td></tr>
            <tr><td>Vietnam</td><td>Asia</td><td>100</td><td>350</td><td>19</td></tr>
            <tr><td>Yemen</td><td>Asia</td><td>35.5</td><td>60</td><td>1</td></tr>

            <!-- Americas -->
            <tr><td>Antigua &amp; Barbuda</td><td>Americas</td><td>0.1</td><td>1200</td><td>6</td></tr>
            <tr><td>Argentina</td><td>Americas</td><td>46.6</td><td>500</td><td>18</td></tr>
            <tr><td>Bahamas</td><td>Americas</td><td>0.41</td><td>2000</td><td>8</td></tr>
            <tr><td>Barbados</td><td>Americas</td><td>0.28</td><td>1300</td><td>7</td></tr>
            <tr><td>Belize</td><td>Americas</td><td>0.44</td><td>900</td><td>6</td></tr>
            <tr><td>Bolivia</td><td>Americas</td><td>12.8</td><td>350</td><td>8</td></tr>
            <tr><td>Brazil</td><td>Americas</td><td>203</td><td>500</td><td>16</td></tr>
            <tr><td>Canada</td><td>Americas</td><td>40</td><td>3200</td><td>10</td></tr>
            <tr><td>Chile</td><td>Americas</td><td>19.4</td><td>1100</td><td>12</td></tr>
            <tr><td>Colombia</td><td>Americas</td><td>52</td><td>500</td><td>15</td></tr>
            <tr><td>Costa Rica</td><td>Americas</td><td>5.2</td><td>1000</td><td>9</td></tr>
            <tr><td>Cuba</td><td>Americas</td><td>11.2</td><td>35</td><td>2</td></tr>
            <tr><td>Dominica</td><td>Americas</td><td>0.07</td><td>900</td><td>6</td></tr>
            <tr><td>Dominican Republic</td><td>Americas</td><td>11.4</td><td>600</td><td>13</td></tr>
            <tr><td>Ecuador</td><td>Americas</td><td>18.3</td><td>500</td><td>12</td></tr>
            <tr><td>El Salvador</td><td>Americas</td><td>6.4</td><td>450</td><td>12</td></tr>
            <tr><td>Grenada</td><td>Americas</td><td>0.13</td><td>1000</td><td>6</td></tr>
            <tr><td>Guatemala</td><td>Americas</td><td>18.3</td><td>400</td><td>8</td></tr>
            <tr><td>Guyana</td><td>Americas</td><td>0.82</td><td>500</td><td>7</td></tr>
            <tr><td>Haiti</td><td>Americas</td><td>11.8</td><td>70</td><td>2</td></tr>
            <tr><td>Honduras</td><td>Americas</td><td>10.6</td><td>350</td><td>7</td></tr>
            <tr><td>Jamaica</td><td>Americas</td><td>2.8</td><td>600</td><td>9</td></tr>
            <tr><td>Mexico</td><td>Americas</td><td>129</td><td>1000</td><td>12</td></tr>
            <tr><td>Nicaragua</td><td>Americas</td><td>7.1</td><td>250</td><td>5</td></tr>
            <tr><td>Panama</td><td>Americas</td><td>4.5</td><td>1200</td><td>10</td></tr>
            <tr><td>Paraguay</td><td>Americas</td><td>7.4</td><td>400</td><td>8</td></tr>
            <tr><td>Peru</td><td>Americas</td><td>34.6</td><td>550</td><td>10</td></tr>
            <tr><td>Saint Kitts &amp; Nevis</td><td>Americas</td><td>0.05</td><td>1200</td><td>6</td></tr>
            <tr><td>Saint Lucia</td><td>Americas</td><td>0.18</td><td>1000</td><td>6</td></tr>
            <tr><td>Saint Vincent &amp; the Grenadines</td><td>Americas</td><td>0.1</td><td>900</td><td>6</td></tr>
            <tr><td>Suriname</td><td>Americas</td><td>0.63</td><td>350</td><td>5</td></tr>
            <tr><td>Trinidad &amp; Tobago</td><td>Americas</td><td>1.4</td><td>1100</td><td>7</td></tr>
            <tr><td>United States</td><td>Americas</td><td>333</td><td>4200</td><td>15</td></tr>
            <tr><td>Uruguay</td><td>Americas</td><td>3.4</td><td>1200</td><td>12</td></tr>
            <tr><td>Venezuela</td><td>Americas</td><td>28.5</td><td>20</td><td>10</td></tr>

            <!-- Africa -->
            <tr><td>Algeria</td><td>Africa</td><td>46.3</td><td>300</td><td>4</td></tr>
            <tr><td>Angola</td><td>Africa</td><td>37</td><td>200</td><td>5</td></tr>
            <tr><td>Benin</td><td>Africa</td><td>14.9</td><td>150</td><td>4</td></tr>
            <tr><td>Botswana</td><td>Africa</td><td>2.7</td><td>500</td><td>7</td></tr>
            <tr><td>Burkina Faso</td><td>Africa</td><td>24</td><td>80</td><td>3</td></tr>
            <tr><td>Burundi</td><td>Africa</td><td>13</td><td>40</td><td>2</td></tr>
            <tr><td>Cabo Verde</td><td>Africa</td><td>0.57</td><td>350</td><td>5</td></tr>
            <tr><td>Cameroon</td><td>Africa</td><td>30</td><td>150</td><td>4</td></tr>
            <tr><td>Central African Republic</td><td>Africa</td><td>6</td><td>50</td><td>6</td></tr>
            <tr><td>Chad</td><td>Africa</td><td>18.5</td><td>60</td><td>2</td></tr>
            <tr><td>Comoros</td><td>Africa</td><td>0.85</td><td>120</td><td>3</td></tr>
            <tr><td>Republic of the Congo</td><td>Africa</td><td>6.2</td><td>180</td><td>4</td></tr>
            <tr><td>DR Congo</td><td>Africa</td><td>111</td><td>50</td><td>3</td></tr>
            <tr><td>Djibouti</td><td>Africa</td><td>1.1</td><td>300</td><td>5</td></tr>
            <tr><td>Egypt</td><td>Africa</td><td>112.5</td><td>200</td><td>5</td></tr>
            <tr><td>Equatorial Guinea</td><td>Africa</td><td>1.7</td><td>800</td><td>5</td></tr>
            <tr><td>Eritrea</td><td>Africa</td><td>3.8</td><td>70</td><td>1</td></tr>
            <tr><td>Eswatini</td><td>Africa</td><td>1.2</td><td>350</td><td>4</td></tr>
            <tr><td>Ethiopia</td><td>Africa</td><td>126.8</td><td>60</td><td>2</td></tr>
            <tr><td>Gabon</td><td>Africa</td><td>2.4</td><td>600</td><td>5</td></tr>
            <tr><td>Gambia</td><td>Africa</td><td>2.8</td><td>80</td><td>3</td></tr>
            <tr><td>Ghana</td><td>Africa</td><td>35</td><td>250</td><td>8</td></tr>
            <tr><td>Guinea</td><td>Africa</td><td>14</td><td>60</td><td>3</td></tr>
            <tr><td>Guinea-Bissau</td><td>Africa</td><td>2.2</td><td>70</td><td>2</td></tr>
            <tr><td>Ivory Coast</td><td>Africa</td><td>29</td><td>200</td><td>4</td></tr>
            <tr><td>Kenya</td><td>Africa</td><td>55</td><td>250</td><td>9</td></tr>
            <tr><td>Lesotho</td><td>Africa</td><td>2.3</td><td>180</td><td>3</td></tr>
            <tr><td>Liberia</td><td>Africa</td><td>5.4</td><td>50</td><td>2</td></tr>
            <tr><td>Libya</td><td>Africa</td><td>7.1</td><td>350</td><td>4</td></tr>
            <tr><td>Madagascar</td><td>Africa</td><td>31.3</td><td>50</td><td>2</td></tr>
            <tr><td>Malawi</td><td>Africa</td><td>21</td><td>40</td><td>2</td></tr>
            <tr><td>Mali</td><td>Africa</td><td>23.3</td><td>80</td><td>3</td></tr>
            <tr><td>Mauritania</td><td>Africa</td><td>5.1</td><td>150</td><td>3</td></tr>
            <tr><td>Mauritius</td><td>Africa</td><td>1.3</td><td>800</td><td>10</td></tr>
            <tr><td>Morocco</td><td>Africa</td><td>37.5</td><td>300</td><td>6</td></tr>
            <tr><td>Mozambique</td><td>Africa</td><td>34.8</td><td>60</td><td>3</td></tr>
            <tr><td>Namibia</td><td>Africa</td><td>2.7</td><td>500</td><td>6</td></tr>
            <tr><td>Niger</td><td>Africa</td><td>28</td><td>50</td><td>2</td></tr>
            <tr><td>Nigeria</td><td>Africa</td><td>229</td><td>150</td><td>12</td></tr>
            <tr><td>Rwanda</td><td>Africa</td><td>14.3</td><td>80</td><td>3</td></tr>
            <tr><td>S√£o Tom√© &amp; Pr√≠ncipe</td><td>Africa</td><td>0.23</td><td>150</td><td>3</td></tr>
            <tr><td>Senegal</td><td>Africa</td><td>19</td><td>150</td><td>4</td></tr>
            <tr><td>Seychelles</td><td>Africa</td><td>0.1</td><td>1000</td><td>9</td></tr>
            <tr><td>Sierra Leone</td><td>Africa</td><td>9</td><td>50</td><td>2</td></tr>
            <tr><td>Somalia</td><td>Africa</td><td>18</td><td>40</td><td>2</td></tr>
            <tr><td>South Africa</td><td>Africa</td><td>60.8</td><td>900</td><td>13</td></tr>
            <tr><td>South Sudan</td><td>Africa</td><td>11.5</td><td>30</td><td>1</td></tr>
            <tr><td>Sudan</td><td>Africa</td><td>49</td><td>40</td><td>2</td></tr>
            <tr><td>Tanzania</td><td>Africa</td><td>68</td><td>150</td><td>4</td></tr>
            <tr><td>Togo</td><td>Africa</td><td>9.2</td><td>100</td><td>3</td></tr>
            <tr><td>Tunisia</td><td>Africa</td><td>12.2</td><td>400</td><td>6</td></tr>
            <tr><td>Uganda</td><td>Africa</td><td>49</td><td>100</td><td>5</td></tr>
            <tr><td>Zambia</td><td>Africa</td><td>21</td><td>150</td><td>5</td></tr>
            <tr><td>Zimbabwe</td><td>Africa</td><td>16.9</td><td>120</td><td>6</td></tr>

            <!-- Oceania -->
            <tr><td>Australia</td><td>Oceania</td><td>27.1</td><td>3200</td><td>10</td></tr>
            <tr><td>Fiji</td><td>Oceania</td><td>0.94</td><td>500</td><td>6</td></tr>
            <tr><td>Kiribati</td><td>Oceania</td><td>0.13</td><td>150</td><td>3</td></tr>
            <tr><td>Marshall Islands</td><td>Oceania</td><td>0.06</td><td>400</td><td>5</td></tr>
            <tr><td>Micronesia</td><td>Oceania</td><td>0.11</td><td>350</td><td>4</td></tr>
            <tr><td>Nauru</td><td>Oceania</td><td>0.01</td><td>450</td><td>4</td></tr>
            <tr><td>New Zealand</td><td>Oceania</td><td>5.2</td><td>3000</td><td>9</td></tr>
            <tr><td>Palau</td><td>Oceania</td><td>0.02</td><td>800</td><td>5</td></tr>
            <tr><td>Papua New Guinea</td><td>Oceania</td><td>10.3</td><td>200</td><td>3</td></tr>
            <tr><td>Samoa</td><td>Oceania</td><td>0.22</td><td>350</td><td>4</td></tr>
            <tr><td>Solomon Islands</td><td>Oceania</td><td>0.73</td><td>180</td><td>3</td></tr>
            <tr><td>Tonga</td><td>Oceania</td><td>0.1</td><td>400</td><td>4</td></tr>
            <tr><td>Tuvalu</td><td>Oceania</td><td>0.01</td><td>350</td><td>3</td></tr>
            <tr><td>Vanuatu</td><td>Oceania</td><td>0.34</td><td>300</td><td>4</td></tr>
          </tbody>
        </table>
      </div>
      <div class="empty" id="emptyState">No matching rows.</div>
      <div id="tableDescription" class="note">
        Notes: Timezones show standard-time GMT/UTC offsets (DST ignored). Ranges indicate countries spanning multiple time zones.
        ‚ÄúCrypto hubs‚Äù list notable cities/regions and is not exhaustive. Figures are indicative (2023--2024 snapshot window):
        Population from UN DESA and national stats; incomes are broad estimates (Numbeo/ILO/World Bank proxies); crypto usage from public industry estimates (e.g., TripleA, Chainalysis indexes).
        Net crypto reserves are illustrative placeholders in USD. For latest authoritative figures, replace the dataset via your own CSV/JSON.
        Holdings per Crypto User: reservesUSD / (populationPersons √ó cryptoUsageShare). Example (US): 40,000,000,000 / (333,000,000 √ó 0.15) ‚âà $800.
      </div>
    </div>
  </div>

  <script>
    (function(){
      const table = document.getElementById('dataTable');
      const tbody = table.tBodies[0];
      const thead = table.tHead;
      const headers = Array.from(thead.rows[0].cells);
      const searchInput = document.getElementById('searchInput');
      const clearBtn = document.getElementById('clearSearch');
      const continentFilter = document.getElementById('continentFilter');
      const resetBtn = document.getElementById('resetBtn');
      const rowCount = document.getElementById('rowCount');
      const emptyState = document.getElementById('emptyState');

      // Column types:
      // 0=Country(text), 1=Continent(text), 2=Population(number, in millions),
      // 3=Income(number USD), 4=Crypto%(number),
      // 5=Net Crypto Reserves (USD, number),
      // 6=Timezone(special), 7=Hubs(text), 8=Holdings per crypto user (USD, number)
      const colTypes = ['text','text','number','number','number','number','timezone','text','number'];

      // Net crypto reserves (USD). Replace placeholders with your data.
      // Previously these were "billions"; now they are absolute USD values.
      const reservesMap = {
        // Europe (illustrative examples)
        "Albania": 0.02e9,
        "Andorra": 0.01e9,
        "Austria": 2.1e9,
        "Belgium": 1.8e9,
        "Belarus": 0.3e9,
        "Bosnia & Herzegovina": 0.05e9,
        "Bulgaria": 0.7e9,
        "Croatia": 0.25e9,
        "Cyprus": 0.9e9,
        "Czechia": 1.1e9,
        "Denmark": 2.0e9,
        "Estonia": 0.2e9,
        "Finland": 1.6e9,
        "France": 7.5e9,
        "Germany": 11.0e9,
        "Greece": 0.8e9,
        "Hungary": 0.6e9,
        "Iceland": 0.08e9,
        "Ireland": 3.2e9,
        "Italy": 4.0e9,
        "Latvia": 0.15e9,
        "Liechtenstein": 0.05e9,
        "Lithuania": 0.18e9,
        "Luxembourg": 1.4e9,
        "Malta": 0.35e9,
        "Moldova": 0.03e9,
        "Monaco": 0.06e9,
        "Montenegro": 0.04e9,
        "Netherlands": 6.2e9,
        "North Macedonia": 0.05e9,
        "Norway": 2.3e9,
        "Poland": 1.2e9,
        "Portugal": 1.0e9,
        "Romania": 0.5e9,
        "Russia": 3.0e9,
        "San Marino": 0.005e9,
        "Serbia": 0.2e9,
        "Slovakia": 0.22e9,
        "Slovenia": 0.19e9,
        "Spain": 3.5e9,
        "Sweden": 2.8e9,
        "Switzerland": 9.0e9,
        "T√ºrkiye": 1.3e9,
        "Ukraine": 0.4e9,
        "United Kingdom": 12.0e9,
        "Vatican City": 0,

        // Asia (illustrative)
        "Afghanistan": 0.01e9,
        "Armenia": 0.05e9,
        "Azerbaijan": 0.12e9,
        "Bahrain": 0.4e9,
        "Bangladesh": 0.2e9,
        "Bhutan": 0.005e9,
        "Brunei": 0.08e9,
        "Cambodia": 0.06e9,
        "China": 25e9,
        "Georgia": 0.07e9,
        "India": 12e9,
        "Indonesia": 2.5e9,
        "Iran": 1.0e9,
        "Iraq": 0.3e9,
        "Israel": 3.2e9,
        "Japan": 8.5e9,
        "Jordan": 0.09e9,
        "Kazakhstan": 0.35e9,
        "Kuwait": 0.6e9,
        "Kyrgyzstan": 0.03e9,
        "Laos": 0.02e9,
        "Lebanon": 0.05e9,
        "Malaysia": 1.8e9,
        "Maldives": 0.01e9,
        "Mongolia": 0.02e9,
        "Myanmar": 0.03e9,
        "Nepal": 0.02e9,
        "Oman": 0.35e9,
        "Pakistan": 0.2e9,
        "Palestine": 0.01e9,
        "Philippines": 1.6e9,
        "Qatar": 0.5e9,
        "Saudi Arabia": 1.5e9,
        "Singapore": 6.0e9,
        "Sri Lanka": 0.05e9,
        "Syria": 0.01e9,
        "Taiwan": 3.5e9,
        "Tajikistan": 0.01e9,
        "Thailand": 2.0e9,
        "Timor-Leste": 0.005e9,
        "Turkmenistan": 0.03e9,
        "United Arab Emirates": 10e9,
        "Uzbekistan": 0.08e9,
        "Vietnam": 1.9e9,
        "Yemen": 0.005e9,

        // Americas (illustrative)
        "Antigua & Barbuda": 0.01e9,
        "Argentina": 2.2e9,
        "Bahamas": 0.1e9,
        "Barbados": 0.02e9,
        "Belize": 0.01e9,
        "Bolivia": 0.08e9,
        "Brazil": 7.5e9,
        "Canada": 10e9,
        "Chile": 1.2e9,
        "Colombia": 1.0e9,
        "Costa Rica": 0.15e9,
        "Cuba": 0.02e9,
        "Dominica": 0.005e9,
        "Dominican Republic": 0.25e9,
        "Ecuador": 0.2e9,
        "El Salvador": 0.5e9,
        "Grenada": 0.005e9,
        "Guatemala": 0.12e9,
        "Guyana": 0.03e9,
        "Haiti": 0.005e9,
        "Honduras": 0.05e9,
        "Jamaica": 0.06e9,
        "Mexico": 3.5e9,
        "Nicaragua": 0.03e9,
        "Panama": 0.4e9,
        "Paraguay": 0.05e9,
        "Peru": 0.6e9,
        "Saint Kitts & Nevis": 0.005e9,
        "Saint Lucia": 0.005e9,
        "Saint Vincent & the Grenadines": 0.005e9,
        "Suriname": 0.01e9,
        "Trinidad & Tobago": 0.08e9,
        "United States": 40e9,
        "Uruguay": 0.12e9,
        "Venezuela": 0.2e9,

        // Africa (illustrative)
        "Algeria": 0.15e9,
        "Angola": 0.12e9,
        "Benin": 0.02e9,
        "Botswana": 0.05e9,
        "Burkina Faso": 0.02e9,
        "Burundi": 0.005e9,
        "Cabo Verde": 0.005e9,
        "Cameroon": 0.03e9,
        "Central African Republic": 0.02e9,
        "Chad": 0.005e9,
        "Comoros": 0.003e9,
        "Republic of the Congo": 0.02e9,
        "DR Congo": 0.03e9,
        "Djibouti": 0.005e9,
        "Egypt": 0.6e9,
        "Equatorial Guinea": 0.02e9,
        "Eritrea": 0.003e9,
        "Eswatini": 0.005e9,
        "Ethiopia": 0.02e9,
        "Gabon": 0.02e9,
        "Gambia": 0.003e9,
        "Ghana": 0.25e9,
        "Guinea": 0.01e9,
        "Guinea-Bissau": 0.003e9,
        "Ivory Coast": 0.05e9,
        "Kenya": 0.5e9,
        "Lesotho": 0.003e9,
        "Liberia": 0.003e9,
        "Libya": 0.03e9,
        "Madagascar": 0.005e9,
        "Malawi": 0.004e9,
        "Mali": 0.01e9,
        "Mauritania": 0.01e9,
        "Mauritius": 0.2e9,
        "Morocco": 0.4e9,
        "Mozambique": 0.02e9,
        "Namibia": 0.03e9,
        "Niger": 0.005e9,
        "Nigeria": 3.0e9,
        "Rwanda": 0.02e9,
        "S√£o Tom√© & Pr√≠ncipe": 0.002e9,
        "Senegal": 0.04e9,
        "Seychelles": 0.02e9,
        "Sierra Leone": 0.004e9,
        "Somalia": 0.003e9,
        "South Africa": 2.8e9,
        "South Sudan": 0.003e9,
        "Sudan": 0.01e9,
        "Tanzania": 0.08e9,
        "Togo": 0.01e9,
        "Tunisia": 0.06e9,
        "Uganda": 0.06e9,
        "Zambia": 0.03e9,
        "Zimbabwe": 0.02e9,

        // Oceania (illustrative)
        "Australia": 3.0e9,
        "Fiji": 0.02e9,
        "Kiribati": 0.001e9,
        "Marshall Islands": 0.005e9,
        "Micronesia": 0.003e9,
        "Nauru": 0.001e9,
        "New Zealand": 0.6e9,
        "Palau": 0.002e9,
        "Papua New Guinea": 0.02e9,
        "Samoa": 0.003e9,
        "Solomon Islands": 0.004e9,
        "Tonga": 0.003e9,
        "Tuvalu": 0.001e9,
        "Vanuatu": 0.004e9
      };

      // Timezone and hubs maps (existing)
      const tzMap = {
        "Albania":"UTC+1","Andorra":"UTC+1","Austria":"UTC+1","Belgium":"UTC+1","Belarus":"UTC+3","Bosnia & Herzegovina":"UTC+1","Bulgaria":"UTC+2","Croatia":"UTC+1","Cyprus":"UTC+2","Czechia":"UTC+1","Czech Republic":"UTC+1","Denmark":"UTC+1","Estonia":"UTC+2","Finland":"UTC+2","France":"UTC+1","Germany":"UTC+1","Greece":"UTC+2","Hungary":"UTC+1","Iceland":"UTC+0","Ireland":"UTC+0","Italy":"UTC+1","Latvia":"UTC+2","Liechtenstein":"UTC+1","Lithuania":"UTC+2","Luxembourg":"UTC+1","Malta":"UTC+1","Moldova":"UTC+2","Monaco":"UTC+1","Montenegro":"UTC+1","Netherlands":"UTC+1","North Macedonia":"UTC+1","Norway":"UTC+1","Poland":"UTC+1","Portugal":"UTC-1 to UTC+0","Romania":"UTC+2","Russia":"UTC+2 to UTC+12","San Marino":"UTC+1","Serbia":"UTC+1","Slovakia":"UTC+1","Slovenia":"UTC+1","Spain":"UTC+0 to UTC+1","Sweden":"UTC+1","Switzerland":"UTC+1","T√ºrkiye":"UTC+3","Ukraine":"UTC+2","United Kingdom":"UTC+0","Vatican City":"UTC+1",
        "Afghanistan":"UTC+4:30","Armenia":"UTC+4","Azerbaijan":"UTC+4","Bahrain":"UTC+3","Bangladesh":"UTC+6","Bhutan":"UTC+6","Brunei":"UTC+8","Cambodia":"UTC+7","China":"UTC+8","Georgia":"UTC+4","India":"UTC+5:30","Indonesia":"UTC+7 to UTC+9","Iran":"UTC+3:30","Iraq":"UTC+3","Israel":"UTC+2","Japan":"UTC+9","Jordan":"UTC+2","Kazakhstan":"UTC+5 to UTC+6","Kuwait":"UTC+3","Kyrgyzstan":"UTC+6","Laos":"UTC+7","Lebanon":"UTC+2","Malaysia":"UTC+8","Maldives":"UTC+5","Mongolia":"UTC+7 to UTC+8","Myanmar":"UTC+6:30","Nepal":"UTC+5:45","Oman":"UTC+4","Pakistan":"UTC+5","Palestine":"UTC+2","Philippines":"UTC+8","Qatar":"UTC+3","Saudi Arabia":"UTC+3","Singapore":"UTC+8","South Korea":"UTC+9","Sri Lanka":"UTC+5:30","Syria":"UTC+2","Taiwan":"UTC+8","Tajikistan":"UTC+5","Thailand":"UTC+7","Timor-Leste":"UTC+9","Turkmenistan":"UTC+5","United Arab Emirates":"UTC+4","Uzbekistan":"UTC+5","Vietnam":"UTC+7","Yemen":"UTC+3","North Korea":"UTC+9",
        "Antigua & Barbuda":"UTC-4","Argentina":"UTC-3","Bahamas":"UTC-5","Barbados":"UTC-4","Belize":"UTC-6","Bolivia":"UTC-4","Brazil":"UTC-2 to UTC-5","Canada":"UTC-3:30 to UTC-8","Chile":"UTC-6 to UTC-4","Colombia":"UTC-5","Costa Rica":"UTC-6","Cuba":"UTC-5","Dominica":"UTC-4","Dominican Republic":"UTC-4","Ecuador":"UTC-6 to UTC-5","El Salvador":"UTC-6","Grenada":"UTC-4","Guatemala":"UTC-6","Guyana":"UTC-4","Haiti":"UTC-5","Honduras":"UTC-6","Jamaica":"UTC-5","Mexico":"UTC-5 to UTC-8","Nicaragua":"UTC-6","Panama":"UTC-5","Paraguay":"UTC-4","Peru":"UTC-5","Saint Kitts & Nevis":"UTC-4","Saint Lucia":"UTC-4","Saint Vincent & the Grenadines":"UTC-4","Suriname":"UTC-3","Trinidad & Tobago":"UTC-4","United States":"UTC-4 to UTC-10","Uruguay":"UTC-3","Venezuela":"UTC-4",
        "Algeria":"UTC+1","Angola":"UTC+1","Benin":"UTC+1","Botswana":"UTC+2","Burkina Faso":"UTC+0","Burundi":"UTC+2","Cabo Verde":"UTC-1","Cameroon":"UTC+1","Central African Republic":"UTC+1","Chad":"UTC+1","Comoros":"UTC+3","Republic of the Congo":"UTC+1","DR Congo":"UTC+1 to UTC+2","Democratic Republic of the Congo":"UTC+1 to UTC+2","Djibouti":"UTC+3","Egypt":"UTC+2","Equatorial Guinea":"UTC+1","Eritrea":"UTC+3","Eswatini":"UTC+2","Ethiopia":"UTC+3","Gabon":"UTC+1","Gambia":"UTC+0","Ghana":"UTC+0","Guinea":"UTC+0","Guinea-Bissau":"UTC+0","Ivory Coast":"UTC+0","C√¥te d‚ÄôIvoire":"UTC+0","Kenya":"UTC+3","Lesotho":"UTC+2","Liberia":"UTC+0","Libya":"UTC+2","Madagascar":"UTC+3","Malawi":"UTC+2","Mali":"UTC+0","Mauritania":"UTC+0","Mauritius":"UTC+4","Morocco":"UTC+1","Mozambique":"UTC+2","Namibia":"UTC+2","Niger":"UTC+1","Nigeria":"UTC+1","Rwanda":"UTC+2","S√£o Tom√© & Pr√≠ncipe":"UTC+0","Senegal":"UTC+0","Seychelles":"UTC+4","Sierra Leone":"UTC+0","Somalia":"UTC+3","South Africa":"UTC+2","South Sudan":"UTC+2","Sudan":"UTC+2","Tanzania":"UTC+3","Togo":"UTC+0","Tunisia":"UTC+1","Uganda":"UTC+3","Zambia":"UTC+2","Zimbabwe":"UTC+2",
        "Australia":"UTC+8 to UTC+10:30","Fiji":"UTC+12","Kiribati":"UTC+12 to UTC+14","Marshall Islands":"UTC+12","Micronesia":"UTC+10 to UTC+11","Nauru":"UTC+12","New Zealand":"UTC+12 to UTC+12:45","Palau":"UTC+9","Papua New Guinea":"UTC+10","Samoa":"UTC+13","Solomon Islands":"UTC+11","Tonga":"UTC+13","Tuvalu":"UTC+12","Vanuatu":"UTC+11"
      };

      const hubsMap = { /* same content as before (omitted for brevity) */ };

      // Utility: number formatting
      const nf0 = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 });
      const nf1 = new Intl.NumberFormat('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 2 });
      const money0 = new Intl.NumberFormat('en-US', { maximumFractionDigits: 0 });
      const compact = new Intl.NumberFormat('en-US', { notation: 'compact', maximumFractionDigits: 2 });

      function parseNumber(text){
        const n = parseFloat(String(text).replace(/[, ]/g,''));
        return Number.isFinite(n) ? n : null;
      }

      function formatPopulation(v){
        if (v == null) return '--';
        if (v < 0.01) return String(v);
        return nf1.format(v);
      }

      function formatIncome(v){
        if (v == null || v === 0) return '--';
        return '$' + money0.format(v);
      }

      function formatPercent(v){
        if (v == null || v === 0) return '--';
        return nf0.format(v) + '%';
      }

      // Reserves displayed in USD, compact if large
      function formatReservesUSD(v){
        if (v == null || v === 0) return '--';
        return '$' + (v >= 1000000 ? compact.format(v) : money0.format(v));
      }

      function formatHoldingsPerUser(v){
        if (v == null || !Number.isFinite(v) || v <= 0) return '--';
        return '$' + money0.format(v);
      }

      function parseUtcOffsetToMin(s){
        if (!s) return null;
        const str = String(s);
        if (!/(UTC|GMT)/i.test(str)) return null;
        const match = str.match(/(UTC|GMT)\s*([+\-‚àí])\s*(\d{1,2})(?::?(\d{1,2}))?(\.\d+)?/i);
        if (!match) return null;
        const sign = (match[2] === '-' || match[2] === '‚àí') ? -1 : 1;
        const hours = parseInt(match[3], 10);
        let minutes = 0;
        if (match[4]) minutes = parseInt(match[4], 10);
        else if (match[5]) minutes = Math.round(parseFloat(match[5]) * 60);
        return sign * (hours * 60 + minutes);
      }

      function enrichRows(){
        const rows = Array.from(tbody.rows);
        rows.forEach(row => {
          const country = row.cells[0]?.textContent.trim();
          if (row.cells.length === 5){
            const resTd = document.createElement('td'); row.appendChild(resTd);
            const tzTd = document.createElement('td'); row.appendChild(tzTd);
            const hubsTd = document.createElement('td'); row.appendChild(hubsTd);
            const holdTd = document.createElement('td'); row.appendChild(holdTd);
          } else if (row.cells.length === 7){
            const resTd = document.createElement('td'); row.insertBefore(resTd, row.cells[5]);
            const holdTd = document.createElement('td'); row.appendChild(holdTd);
          } else if (row.cells.length === 8){
            const holdTd = document.createElement('td'); row.appendChild(holdTd);
          }

          const resVal = reservesMap[country] ?? null; // USD
          row.cells[5].textContent = resVal == null ? '' : String(resVal);

          const tz = tzMap[country] || '';
          row.cells[6].textContent = tz;

          const hubs = hubsMap[country] || '';
          row.cells[7].textContent = hubs;

          row.cells[8].textContent = '';
        });
      }

      function normalizeCells(){
        Array.from(tbody.rows).forEach(row => {
          // Population (M)
          const popTd = row.cells[2];
          const popValM = parseNumber(popTd.textContent);
          popTd.setAttribute('data-value', popValM ?? '');
          popTd.textContent = formatPopulation(popValM);
          popTd.classList.add('mono');

          // Income
          const incTd = row.cells[3];
          const incVal = parseNumber(incTd.textContent);
          incTd.setAttribute('data-value', incVal ?? '');
          incTd.textContent = formatIncome(incVal);
          incTd.classList.add('mono');

          // Crypto %
          const cTd = row.cells[4];
          const cValPct = parseNumber(cTd.textContent);
          cTd.setAttribute('data-value', cValPct ?? '');
          cTd.textContent = formatPercent(cValPct);
          cTd.classList.add('mono');

          // Reserves USD
          const resTd = row.cells[5];
          const resUSD = parseNumber(resTd.textContent);
          resTd.setAttribute('data-value', resUSD ?? '');
          resTd.textContent = formatReservesUSD(resUSD);
          resTd.classList.add('mono');

          // Timezone
          const tzTd = row.cells[6];
          const tz = tzTd?.textContent ?? '';
          const tzMin = parseUtcOffsetToMin(tz);
          if (tzTd) tzTd.setAttribute('data-value', tzMin ?? '');

          // Hubs
          const hubsTd = row.cells[7];
          if (hubsTd) hubsTd.setAttribute('data-value', hubsTd.textContent.toLowerCase());

          // Holdings per crypto user: reservesUSD / (popPersons * cValPct/100)
          const holdTd = row.cells[8];
          let perUser = null;
          if (resUSD != null && resUSD > 0 && popValM != null && popValM > 0 && cValPct != null && cValPct > 0){
            const popPersons = popValM * 1e6;
            const share = cValPct / 100;
            perUser = resUSD / (popPersons * share);
          }
          holdTd.setAttribute('data-value', perUser != null && Number.isFinite(perUser) ? perUser : '');
          holdTd.textContent = formatHoldingsPerUser(perUser);
          holdTd.classList.add('mono');
        });
      }

      // Sorting
      let sortState = { col: null, dir: 'asc' };

      function clearHeaderIndicators(){
        headers.forEach(h => {
          h.dataset.sort = '';
          h.setAttribute('aria-sort','none');
        });
      }

      function compare(a, b, type){
        if (a == null && b == null) return 0;
        if (a == null) return 1;
        if (b == null) return -1;
        if (type === 'number' || type === 'timezone'){
          return a === b ? 0 : (a < b ? -1 : 1);
        }
        return String(a).localeCompare(String(b), undefined, { sensitivity: 'base', numeric: true });
      }

      function sortBy(colIdx, dir){
        const type = colTypes[colIdx];
        const rows = Array.from(tbody.rows).map((row, idx) => {
          let v;
          if (type === 'number'){
            const raw = row.cells[colIdx]?.getAttribute('data-value');
            v = raw === '' ? null : parseFloat(raw);
          } else if (type === 'timezone'){
            const tzmin = row.cells[colIdx]?.getAttribute('data-value');
            v = tzmin === '' ? null : parseInt(tzmin, 10);
          } else {
            v = row.cells[colIdx]?.textContent.trim().toLowerCase();
          }
          return { row, idx, v };
        });

        rows.sort((x, y) => {
          let cmp = compare(x.v, y.v, type);
          if (dir === 'desc') cmp = -cmp;
          if (cmp === 0) return x.idx - y.idx;
          return cmp;
        });

        const frag = document.createDocumentFragment();
        rows.forEach(({row}) => frag.appendChild(row));
        tbody.appendChild(frag);
      }

      function onHeaderClick(ev){
        const th = ev.currentTarget;
        const colIdx = parseInt(th.dataset.col, 10);
        const nextDir = (sortState.col === colIdx && sortState.dir === 'asc') ? 'desc' : 'asc';
        sortState = { col: colIdx, dir: nextDir };
        sortBy(colIdx, nextDir);
        clearHeaderIndicators();
        th.dataset.sort = nextDir;
        th.setAttribute('aria-sort', nextDir === 'asc' ? 'ascending' : 'descending');
        updateRowCount();
      }

      headers.forEach(h => h.addEventListener('click', onHeaderClick));

      // Search + filter
      function debounced(fn, ms){
        let t; return (...args)=>{ clearTimeout(t); t = setTimeout(()=>fn(...args), ms); };
      }

      function applyFilters(){
        const q = searchInput.value.trim().toLowerCase();
        const cont = continentFilter.value;
        let visible = 0;

        Array.from(tbody.rows).forEach(row => {
          const text = row.innerText.toLowerCase();
          const matchQ = q ? text.includes(q) : true;
          const matchC = cont ? (row.cells[1]?.textContent === cont) : true;
          const show = matchQ && matchC;
          row.style.display = show ? '' : 'none';
          if (show) visible++;
        });

        emptyState.style.display = visible ? 'none' : 'block';
        updateRowCount();
      }

      const doSearch = debounced(applyFilters, 120);

      searchInput.addEventListener('input', () => {
        clearBtn.style.display = searchInput.value ? 'block' : 'none';
        doSearch();
      });
      clearBtn.addEventListener('click', () => {
        searchInput.value = '';
        clearBtn.style.display = 'none';
        applyFilters();
      });
      continentFilter.addEventListener('change', applyFilters);

      resetBtn.addEventListener('click', () => {
        searchInput.value = '';
        clearBtn.style.display = 'none';
        continentFilter.value = '';
        sortState = { col: null, dir: 'asc' };
        clearHeaderIndicators();
        applyFilters();
      });

      function updateRowCount(){
        const total = tbody.rows.length;
        const visible = Array.from(tbody.rows).filter(r => r.style.display !== 'none').length;
        rowCount.textContent = `${nf0.format(visible)} of ${nf0.format(total)} rows`;
      }

      // Initial enrich + normalize + default filters
      enrichRows();
      normalizeCells();
      applyFilters();
      updateRowCount();
    })();
  </script>
</body>
</html>